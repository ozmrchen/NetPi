
# Week 3.1 Code Practice: Playwright Web Automation Basics

## Automate Your Manual Testing
**Time:** 20 minutes | **Rule:** Maximum 5 lines per script!  
**Environment:** Raspberry Pi OS / Linux (Codespaces compatible)

---

## Setup: Install Playwright

```bash
# Install Playwright and browser drivers
pip install playwright
playwright install chromium
```

**Note:** First install might take a few minutes - Playwright downloads a browser to control!

---

## Script 1: Your First Automated Screenshot (5 minutes)

**Remember the manual process?** Open browser ‚Üí Navigate ‚Üí Take screenshot  
**Now automate it!**

Create `auto_screenshot.py`:

```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    page = browser.new_page()
    page.goto("https://example.com")
    page.screenshot(path="example.png")
    print("‚úÖ Screenshot saved: example.png")
```

**Run:** `python3 auto_screenshot.py`

**What happened:** Check your folder - there's a screenshot of example.com!

---

## Script 2: Automated Form Testing (5 minutes)

**Remember testing forms manually in the lab?** Now automate it!

Create `auto_form.py`:

```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    page = browser.new_page()
    page.goto("https://httpbin.org/forms/post")
    page.fill('input[name="custname"]', "Test User")
    page.fill('input[name="custemail"]', "test@example.com")
    page.click('input[type="submit"]')
    print(f"‚úÖ Form submitted! URL: {page.url}")
```

**Run:** `python3 auto_form.py`

**Compare:** How much faster than manually filling the form?

---

## Script 3: Security Header Checker (5 minutes)

**Remember manually checking security headers?** Automate it!

Create `header_check.py`:

```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    page = browser.new_page()
    response = page.goto("https://github.com")
    headers = response.headers
    print(f"üîí Security headers found: {len([h for h in headers if 'security' in h.lower() or 'xss' in h.lower() or 'frame' in h.lower()])}")
    print(f"‚úÖ Strict-Transport-Security: {'Yes' if 'strict-transport-security' in headers else 'No'}")
```

**Run:** `python3 header_check.py`

---

## Script 4: Multi-Site Screenshot Bot (5 minutes)

**Scale up:** Test multiple sites automatically!

Create `multi_screenshot.py`:

```python
from playwright.sync_api import sync_playwright

sites = ["https://monash.edu", "https://unimelb.edu.au", "https://anu.edu.au"]

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    page = browser.new_page()
    for site in sites:
        page.goto(site)
        filename = site.replace("https://", "").replace("/", "_") + ".png"
        page.screenshot(path=filename)
        print(f"‚úÖ Captured: {filename}")
```

**Run:** `python3 multi_screenshot.py`

**Result:** Three university homepages captured automatically!

---

## Challenge: Comprehensive Security Tester

Create `security_tester.py`:

```python
from playwright.sync_api import sync_playwright

def test_site(url):
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=True)
        page = browser.new_page()
        response = page.goto(url)
        
        # Check HTTPS
        https = url.startswith("https://")
        
        # Check security headers
        headers = response.headers
        has_hsts = "strict-transport-security" in headers
        
        # Take evidence screenshot
        page.screenshot(path=f"{url.replace('https://', '').replace('/', '_')}_security.png")
        
        print(f"\nüîç Security Test: {url}")
        print(f"  HTTPS: {'‚úÖ' if https else '‚ùå'}")
        print(f"  HSTS Header: {'‚úÖ' if has_hsts else '‚ùå'}")
        print(f"  Status: {response.status}")
        
        browser.close()

# Test multiple sites
test_site("https://github.com")
test_site("http://example.com")
```

**Run:** `python3 security_tester.py`

---

## What You Learned

**Manual vs Automated:**
- **Lab manual testing:** 5+ minutes per site, one site at a time
- **Your Playwright scripts:** Test dozens of sites in seconds, all automatically

**Key Skills:**
- **Browser automation:** Control Chrome/Firefox with Python
- **Form testing:** Automatically fill and submit forms
- **Security checks:** Verify HTTPS, headers, and security features
- **Evidence collection:** Automatic screenshots of test results

**Real-World Power:**
- Security teams test **thousands of pages daily** using these techniques
- Manual testing: **Impossible at scale**
- Automated testing: **Fast, reliable, repeatable**

---

## Quick Test

1. **What's the main advantage of Playwright over manual testing?**
2. **How would you modify `auto_form.py` to test different input values?**
3. **Why do security teams take screenshots during automated tests?**

---

## Extension Challenge (Optional)

**Advanced:** Make the security tester check multiple Australian university sites:

```python
sites = [
    "https://www.monash.edu",
    "https://www.unimelb.edu.au",
    "https://www.anu.edu.au",
    "https://www.unsw.edu.au",
    "https://www.usyd.edu.au"
]

for site in sites:
    test_site(site)
```

---

## Next: Week 3.2 Lesson - Building Network Monitoring Dashboards

**Coming up:** Learn how security professionals combine Playwright automation with real-time dashboards to monitor thousands of devices simultaneously!
