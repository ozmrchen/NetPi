# Week 1.2 Code Practice: Network Type Detector

## Simple Network Type Detection
**Time:** 20 minutes | **Rule:** Maximum 5 lines per script!

---

## Script 1: Am I on LAN or WAN? (5 minutes)

Create `network_type.py`:

```python
import subprocess
result = subprocess.run(['ip', 'route'], capture_output=True, text=True)
for line in result.stdout.split('\n'):
    if '192.168.' in line or '10.0.' in line:
        print("✅ Connected to LAN")
        break
```

**Run:** `python3 network_type.py`

---

## Script 2: How Far to Internet? (5 minutes)

Create `wan_hops.py`:

```python
from scapy.all import IP, ICMP, sr1

target = "google.com"
max_hops = 5

print(f"Tracing route to {target} (max {max_hops} hops):")

for ttl in range(1, max_hops + 1):
    pkt = IP(dst=target, ttl=ttl) / ICMP()
    reply = sr1(pkt, timeout=2, verbose=0)

    if reply is None:
        print(f"{ttl}: * (no reply)")
        continue

    print(f"{ttl}: {reply.src}")

    if reply.type == 0:  # Echo reply → destination reached
        break
```

**Run:** `sudo python3 wan_hops.py`

---

## Script 3: LAN vs WAN Speed (5 minutes)

Create `speed_test.py`:

```python
from scapy.all import IP, ICMP, sr1
import time

router_ip = "192.168.0.1"   # replace with your router IP
wan_ip = "8.8.8.8"          # Google DNS as WAN target

def ping(host):
    # Build an IP packet to 'host' carrying an ICMP Echo Request (ping)
    pkt = IP(dst=host)/ICMP()
    start = time.time()
    # sr1() → send packet and return first answer only
    reply = sr1(pkt, timeout=2, verbose=0)
    if reply:
        return (time.time() - start) * 1000
    else:
        return None

lan_time = ping(router_ip)
wan_time = ping(wan_ip)

print(f"LAN: {lan_time:.1f} ms" if lan_time else "LAN: no reply")
print(f"WAN: {wan_time:.1f} ms" if wan_time else "WAN: no reply")
```

**Run:** `sudo python3 speed_test.py`

---

## Script 4: Network Summary (5 minutes)

Create `my_networks.py`:

```python
from scapy.all import conf, IP, ICMP, sr1
import socket

# My IP
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.connect(("8.8.8.8", 80))
my_ip = s.getsockname()[0]
s.close()

# Router (default gateway)
_, gw, iface = conf.route.route("8.8.8.8")

# WAN check
pkt = IP(dst="8.8.8.8")/ICMP()
wan = sr1(pkt, timeout=2, verbose=0)

print("WPAN: Bluetooth devices near me")
print(f"LAN : My IP {my_ip} → Router {gw}")
print("WAN : Internet reachable" if wan else "WAN : No reply")
```

**Run:** `sudo python3 my_networks.py`

---

## Challenge: Network Classifier

```python
def classify_ip(ip):
    if ip.startswith('192.168.') or ip.startswith('10.'):
        return "LAN"
    else:
        return "WAN"

my_ip = "192.168.1.100"  # Replace with yours
print(f"{my_ip} is {classify_ip(my_ip)}")
```

---

## What You Learned
- **LAN detection:** Look for 192.168.x.x or 10.x.x.x addresses
- **WAN identification:** Anything outside your local network
- **Network performance:** LAN is faster than WAN
- **Classification:** Python can automatically identify network types

---

## Quick Test
1. What makes an IP address "LAN"?
2. Why is LAN faster than WAN?
3. Where do WPAN devices appear in these scripts?
