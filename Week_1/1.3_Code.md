# Week 1.3 Code Practice: Automate Network Commands

## Automate the Essential Four
**Time:** 20 minutes | **Rule:** Maximum 5 lines per script!

---

## Script 1: Auto Ping Test (5 minutes)

Create `auto_ping.py`:

```python
import subprocess
hosts = ['127.0.0.1', '192.168.1.1', 'google.com']
for host in hosts:
    result = subprocess.run(['ping', '-c', '1', host], capture_output=True)
    print(f"{host}: {'✅ UP' if result.returncode == 0 else '❌ DOWN'}")
```

**Run:** `python3 auto_ping.py`

---

## Script 2: Port Scanner (5 minutes)

Create `check_ports.py`:

```python
import subprocess
result = subprocess.run(['ss', '-tuln'], capture_output=True, text=True)
lines = [line for line in result.stdout.split('\n') if 'LISTEN' in line]
print(f"Open ports: {len(lines)}")
for line in lines[:3]:  # Show first 3
    print(f"  {line.split()[4]}")
```

**Run:** `python3 check_ports.py`

---

## Script 3: Network Info Grabber (5 minutes)

Create `network_info.py`:

```python
import subprocess, socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.connect(("8.8.8.8", 80))
my_ip = sock.getsockname()[0]
router = subprocess.run(['ip', 'route'], capture_output=True, text=True)
router_ip = [line for line in router.stdout.split('\n') if 'default' in line][0].split()[2]
print(f"Me: {my_ip} → Router: {router_ip}")
```

**Run:** `python3 network_info.py`

---

## Script 4: Quick Path Trace (5 minutes)

Create `trace_path.py`:

```python
import subprocess
result = subprocess.run(['traceroute', '-m', '5', 'google.com'], 
                       capture_output=True, text=True)
hops = len([line for line in result.stdout.split('\n') if ' ms' in line])
print(f"Path to Google: {hops} hops")
if hops > 10:
    print("Long path - might be slow")
```

**Run:** `python3 trace_path.py`

---

## Challenge: Network Health Check

Create `health_check.py`:

```python
import subprocess, socket
# Test connectivity
ping_ok = subprocess.run(['ping', '-c', '1', 'google.com'], capture_output=True).returncode == 0
# Count ports  
ports = len([l for l in subprocess.run(['ss', '-tuln'], capture_output=True, text=True).stdout.split('\n') if 'LISTEN' in l])
print(f"Internet: {'✅' if ping_ok else '❌'} | Open ports: {ports}")
```

**Run:** `python3 health_check.py`

---

## What You Learned
- **Automation:** Python can run any network command
- **Status checking:** Automate connectivity tests  
- **Information gathering:** Extract network data programmatically
- **Health monitoring:** Combine multiple checks

---

## Quick Test
1. Which Python module runs command-line tools?
2. How do you check if a ping succeeded?
3. Why automate these commands instead of typing them?
