# Week 2.1 Lab: Identifying Vulnerabilities in Your Environment

## Lab Overview
Use your Week 1 skills to identify potential security vulnerabilities in your network environment. Learn to think like both an attacker and a defender.

**Time Required:** Self-paced (approximately 35 minutes)  
**Environment:** Raspberry Pi 4 (in class) or GitHub Codespaces (at home)  
**Difficulty:** Beginner  
**Focus:** Vulnerability identification and threat assessment

---

## üö® Important Ethics and Safety Notice

**‚ö†Ô∏è CRITICAL: These techniques are for educational purposes only on YOUR OWN systems or authorised lab environments.**

- **DO NOT** attempt these commands on networks you don't own
- **DO NOT** scan other people's computers or school networks without permission  
- **DO NOT** use this knowledge for unauthorised access
- Always follow your school's acceptable use policy
- When in doubt, ask your teacher before trying any command

**Remember**: The same tools used for defence can be misused for attack. Use them responsibly!

---

## Learning Objectives
By the end of this lab, you will be able to:
- Apply Week 1 network commands to identify security risks
- Recognise common vulnerability indicators
- Think like an attacker to spot weaknesses
- Document security findings systematically

---

## Pre-Lab Setup

### In Class: Raspberry Pi 4
1. Boot your Raspberry Pi and open Terminal
2. Ensure you're connected to Wi-Fi or ethernet  
3. **Check package availability**:
   ```bash
   # Verify essential commands are available
   which ss || echo "ss not found - try netstat instead"
   which ip || echo "ip not found - try ifconfig instead" 
   which traceroute || echo "traceroute not found - installing..."
   ```
4. Test basic commands: `ip addr show`

### At Home: GitHub Codespaces (Alternative)
1. Open your NetPi repository in Codespaces
2. Open a new terminal
3. **Note**: Results may be simplified in virtual environment
4. **Check package availability**: Same commands as above
5. Refresh your Week 1 skills: `ping -c 1 google.com`

---

## Part 1: Reconnaissance - What Can Attackers See?

### Step 1.1: Network Information Gathering

**Attacker Perspective**: If someone wanted to attack your network, what information could they easily gather?

```bash
# What can anyone discover about your network?
ip addr show | grep inet
ip route show default
```

**Record what an attacker could learn:**

1. **Your IP address:** `_________________`
2. **Your network range:** `_________________` (e.g., 192.168.1.0/24)
3. **Your router IP:** `_________________`
4. **Connection type:** Wired (eth0) or Wireless (wlan0)?

### Step 1.2: Network Reachability Test

**Attacker's next step**: Test what they can reach from your network

```bash
# Test if common targets are reachable
ping -c 1 127.0.0.1     # Localhost (always works)
ping -c 1 $(ip route | grep default | cut -d' ' -f3)  # Your router
ping -c 1 8.8.8.8       # Internet connectivity
```

**Security Assessment:**
- **Local access**: ‚úÖ Working (expected)
- **Router access**: ‚úÖ Working (expected)  
- **Internet access**: ‚úÖ Working (expected)

**Question:** If ALL of these work, what does this tell an attacker about your network security?

---

## Part 2: Service Discovery - What's Running?

### Step 2.1: Check What Services Are Exposed

**Defender Perspective**: What services are running that attackers could target?

```bash
# Check what's listening on your system
ss -tuln
```

**Example output (try this command to see your own results):**
```
Netid    State     Local Address:Port    Peer Address:Port
udp      UNCONN    0.0.0.0:55957         0.0.0.0:*
udp      UNCONN    127.0.0.54:53         0.0.0.0:*
tcp      LISTEN    127.0.0.1:34301       0.0.0.0:*
tcp      LISTEN    0.0.0.0:22            0.0.0.0:*
tcp      LISTEN    0.0.0.0:3945          0.0.0.0:*
```

**Count your exposures:**

| Port Range | Count | Risk Level |
|------------|-------|------------|
| 1-1023 (system ports) | _____ | High |
| 1024-49151 (registered) | _____ | Medium |
| 49152+ (dynamic) | _____ | Low |

### Step 2.2: Identify Risky Services

**Look for these common vulnerable services:**

```bash
# Check for potentially risky services
ss -tuln | grep :22     # SSH (remote access)
ss -tuln | grep :23     # Telnet (unencrypted)
ss -tuln | grep :80     # Web server
ss -tuln | grep :443    # HTTPS web server
ss -tuln | grep :3389   # Remote Desktop (Windows)
```

**Record findings:**

| Service | Port | Found? | Risk Assessment |
|---------|------|--------|-----------------|
| SSH | 22 | ‚òê Yes ‚òê No | Remote access - secure but targetable |
| Telnet | 23 | ‚òê Yes ‚òê No | **HIGH RISK** - unencrypted |
| HTTP | 80 | ‚òê Yes ‚òê No | Web service - check if needed |
| HTTPS | 443 | ‚òê Yes ‚òê No | Secure web - generally OK |
| RDP | 3389 | ‚òê Yes ‚òê No | Windows remote - often attacked |

---

## Part 3: Network Path Analysis - Attack Routes

### Step 3.1: Map Potential Attack Paths

**Think like an attacker**: How many ways could someone reach your system?

```bash
# See all network routes available
ip route show
```

**Example output (try this command to see your own results):**
```
default via 192.168.0.1 dev wlan0 proto dhcp src 192.168.0.98 metric 600 
192.168.0.0/24 dev wlan0 proto kernel scope link src 192.168.0.98 metric 600 
192.168.0.1 dev wlan0 proto dhcp scope link src 192.168.0.98 metric 600
```

**Identify network access points:**

1. **Direct local access:** Your immediate network `_________________`
2. **Router access:** Through your gateway `_________________`
3. **Internet access:** External connections via `_________________`

### Step 3.2: Test Network Boundaries

```bash
# How far can you reach from your position?
traceroute -m 5 google.com
```

**Example output (try this command to see your own path):**
```
traceroute to google.com (142.250.70.206), 5 hops max, 60 byte packets
 1  mymodem.gateway (192.168.0.1)  1.438 ms  1.824 ms  1.526 ms
 2  10.0.0.1 (10.0.0.1)  15.234 ms  14.567 ms  16.123 ms
 3  203.50.6.5 (203.50.6.5)  25.678 ms  24.234 ms  26.891 ms
 4  142.250.70.206 (142.250.70.206)  28.456 ms  27.123 ms  29.567 ms
```
**Note**: Your results may show `* * *` if routers don't respond - this is normal.

**Security Analysis:**

1. **Hop 1 (your router):** Response time _____ ms
   - Fast response = easy local target for attackers

2. **Hop 2-3 (ISP):** Response times _____ ms  
   - These are the "border" between your network and the internet

3. **Total hops to internet:** _____ 
   - More hops = more places attacks could be launched from

**‚ùì Security Question:** If ALL of these work, what does this tell an attacker about your network security?

---

## Part 4: Vulnerability Assessment Using Week 1 Skills

### Step 4.1: Security Health Check

**Use your Week 1 knowledge to assess security:**

```bash
# Quick security assessment
echo "=== Security Assessment ==="
echo "1. Network reachability:"
ping -c 1 $(ip route | grep default | cut -d' ' -f3) > /dev/null && echo "‚úÖ Router accessible" || echo "‚ùå Router unreachable"

echo "2. Internet connectivity:"  
ping -c 1 8.8.8.8 > /dev/null && echo "‚úÖ Internet accessible" || echo "‚ùå No internet"

echo "3. Open services:"
ss -tuln | wc -l | awk '{print $1 " ports listening"}'

echo "4. External exposure:"
ss -tuln | grep "0.0.0.0" | wc -l | awk '{print $1 " services open to everyone"}'
```

### Step 4.2: Risk Evaluation

**Complete your security profile:**

| Security Factor | Status | Risk Level |
|----------------|--------|------------|
| Router accessible | ‚òê Yes ‚òê No | ‚òê Low ‚òê Medium ‚òê High |
| Internet connected | ‚òê Yes ‚òê No | ‚òê Low ‚òê Medium ‚òê High |
| Services listening | _____ total | ‚òê Low ‚òê Medium ‚òê High |
| Open to internet | _____ services | ‚òê Low ‚òê Medium ‚òê High |

**Overall Risk Assessment:** ‚òê Low ‚òê Medium ‚òê High

---

## Attack Scenario Simulation

### Scenario: School Network Compromise

**Background**: An attacker sits in the school car park with a laptop, trying to compromise the school network.

**Using your Week 1 knowledge, what could they do?**

**Step 1 - Network Discovery:**
```bash
# What the attacker might try
ping -c 1 192.168.1.1    # Test common router IPs
ping -c 1 10.0.0.1       # Test another common range
```

**Step 2 - Service Scanning:**
```bash
# Look for vulnerable services (we'll learn proper tools next week)
ss -tuln | grep "0.0.0.0"   # What's exposed?
```

**Step 3 - Path Analysis:**
```bash
# Map the network structure  
traceroute -m 3 [SCHOOL_SERVER_IP]
```

**Defence Questions:**

1. **How could the school prevent car park attacks?**
   `_________________________________________________`

2. **Which Week 1 command would help detect this attacker?**
   `_________________________________________________`

3. **What should students never do with their computers?**
   `_________________________________________________`

<details>
<summary>Click to show answers</summary>

1. **Strong Wi-Fi encryption, network access controls, monitor for unauthorised devices**
2. **`ss -tuln` to check for suspicious connections, `ping` to test for unauthorised access attempts**
3. **Never leave computers unlocked, never plug in unknown USB devices, never connect to unsecured networks**

</details>

---

## Real-World Vulnerability Examples

### Example 1: The Forgotten Web Server

```bash
# Check if you're accidentally running a web server
ss -tuln | grep :80
ss -tuln | grep :8080
```

**If found**: You might be running a web server without knowing it!
**Security Risk**: Attackers could access internal files or use it to attack others

### Example 2: The SSH Backdoor

```bash
# Check for SSH access
ss -tuln | grep :22
```

**If found**: Someone could try to remotely access your computer
**Security Risk**: If they guess your password, they own your system

### Example 3: The Open Database

```bash
# Check for database services
ss -tuln | grep :3306   # MySQL
ss -tuln | grep :5432   # PostgreSQL
```

**If found**: You might have an exposed database
**Security Risk**: Attackers could steal or modify your data

---

## ü§î Reflection Questions

### ‚ùì Understanding the Threat Landscape

1. **Information Gathering**: What information about your network could an attacker gather just using the commands you know? 
   `_________________________________________________`

2. **Attack Surface**: How many different services did you find running? Which ones surprised you? 
   `_________________________________________________`

3. **Network Position**: From your traceroute results, how many different networks does your traffic pass through to reach the internet? 
   `_________________________________________________`

### ‚ùì Connecting to Lesson Concepts

4. **Unauthorised Access**: Which open ports represent the biggest risk for unauthorised access? Why? 
   `_________________________________________________`

5. **Data Breach Risk**: If an attacker gained access to your router, what data could they potentially intercept? 
   `_________________________________________________`

6. **Malware Spread**: How could malware use your network connections to spread to other devices? 
   `_________________________________________________`

### ‚ùì Defensive Thinking

7. **Reducing Attack Surface**: Which services could you safely disable to reduce security risks? 
   `_________________________________________________`

8. **Monitoring**: How often should networks be checked for new vulnerabilities? 
   `_________________________________________________`

9. **Response Planning**: If you detected an attacker on your network right now, what would be your first three actions? 
   `_________________________________________________`

---

## Extension Activities (If Time Permits)

### Advanced: Network Boundary Testing
```bash
# Test network boundaries
ping -c 1 192.168.1.255    # Broadcast address
ping -c 1 192.168.0.1      # Different network range
```

### Challenge: Compare Network Environments
**Work with a classmate to compare results:**
- How many ports are open on each system?
- Are you on the same network range?
- Do you have the same router?
- Which system appears more secure?

**‚ùì Discussion**: Why might different systems show different vulnerabilities?

### Security Timeline Documentation
**Document when each vulnerability was discovered:**
- Time started: _______
- First open port found: _______
- Router accessibility confirmed: _______  
- Internet path mapped: _______

**‚ùì Analysis**: How long did it take to gather this intelligence? What does this mean for detection?

---

## Common Vulnerability Patterns

**Pattern 1: Default Configurations**
- Router using default password
- Services running with default settings
- Network ranges using standard values (192.168.1.x)

**Pattern 2: Unnecessary Services** 
- Web servers running when not needed
- Remote access enabled when not required
- Development tools left running in production

**Pattern 3: Poor Network Segmentation**
- All devices on same network segment
- No separation between critical and non-critical systems
- Guest and admin access on same network

---

## Lab Submission

**Complete this vulnerability summary:**

1. **Total listening ports:** `_______`
2. **Services open to internet:** `_______`
3. **Highest risk service found:** `_______`
4. **Network hops to internet:** `_______`
5. **Time to gather this intelligence:** `_______` minutes

**Answer in one sentence each:**

6. **What's the most concerning vulnerability you found and why?**

7. **How could an attacker use your network path information maliciously?**

8. **What's one thing you would change to improve security?**

<details>
<summary>Click to show sample answers</summary>

**Understanding the Threat Landscape:**
1. **Information Gathering**: IP addresses, network ranges, router locations, open services, and network topology
2. **Attack Surface**: Varies by system, but SSH (port 22) and web services often surprise students
3. **Network Position**: Usually 3-6 hops, each representing a potential interception point

**Connecting to Lesson Concepts:**
4. **Unauthorised Access**: SSH (port 22) and any service listening on 0.0.0.0 - they accept connections from anywhere
5. **Data Breach Risk**: All network traffic passing through, login credentials, browsing history, internal communications
6. **Malware Spread**: Use network connections to scan for other devices, exploit trust relationships, spread via shared resources

**Defensive Thinking:**
7. **Reducing Attack Surface**: Disable unnecessary services, close unused ports, limit external access to essential services only
8. **Monitoring**: Daily for critical systems, weekly for general networks, continuous monitoring for high-risk environments
9. **Response Planning**: Disconnect affected systems, check for data exfiltration, notify IT/security team

</details>

---

## Next: Week 2.2 Lesson - Network Vulnerability Assessment

**Coming up**: Learn proper vulnerability scanning with `nmap` and understand how to systematically assess network security beyond basic commands.

---

## Troubleshooting

**If commands fail:**
- Permission issues ‚Üí Try without `sudo` first
- Network timeouts ‚Üí Check your connection with `ping 8.8.8.8`
- Command not found ‚Üí Use alternatives: `netstat` instead of `ss`

**If you see unexpected results:**
- Virtual environments show simplified setups (normal in Codespaces)
- Focus on the concepts and patterns rather than specific numbers