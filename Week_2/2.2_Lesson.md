# Week 2.2 Lesson: Network Vulnerability Assessment

## Learning Objectives
By the end of this lesson, you will be able to:
- Use `nmap` to scan for open ports and services
- Identify service versions running on a target system
- Classify risks from scan results using simple criteria
- Compare `nmap` results with your Python scanners from Week 2.1

---

## Warm-up: What Your Python Scripts Did

### Your Week 2.1 Achievement

**`threat_check.py`**: Tested specific risky ports (22, 23, 80, 445, etc.)  
**`service_bot.py`**: Scored open services and calculated security ratings  
**`intel_gatherer.py`**: Combined network info with service discovery

**Limitation**: Only checked ports you explicitly told it to check

### The Gap

**Your Python scripts said**: 4 risky ports checked, some open  
**nmap revealed**: 9 total open ports including unexpected ones (1234, 3001, 7000)

**Question**: What else might be running that you don't know about?

---

## Why Use nmap?

### nmap vs Your Python Scripts

| Feature | Your Python | nmap |
|---------|-------------|------|
| **Speed** | Checks 5-10 ports | Scans 1000+ ports in seconds |
| **Discovery** | Only ports you specify | Finds unexpected services |
| **Detail** | Open or closed | Service name, version, OS detection |
| **Automation** | Custom logic | Industry-standard reporting |

### What nmap Discovers

**Beyond "just open":**
- **What software?** Apache web server vs nginx
- **What version?** OpenSSH 7.4 vs 8.9 (security implications)
- **What OS?** Linux vs Windows (attack methods differ)
- **What purpose?** Production service vs development tool

---

## Port States Recap

### The Three States You Need to Know

**üîì Open**: Service running and accepting connections
- **Example**: Port 80 with Apache web server responding
- **Security implication**: Potential attack target

**üîí Closed**: System reachable, but no service on that port  
- **Example**: Port 22 gets "connection refused" - no SSH server
- **Security implication**: System is live but service isn't available

**üö´ Filtered**: No response (blocked by firewall or dropped)
- **Example**: Packets to port 22 get no response at all
- **Security implication**: Service might exist but is protected

### Real Example from Your System

**From your nmap scan:**
```
445/tcp  open  microsoft-ds    ‚Üê üîì SMB file sharing running
3001/tcp open  nessus          ‚Üê üîì Development service
```

**From your Python script:**
```
Port 22: ‚úÖ CLOSED             ‚Üê üîí SSH not running  
Port 23: ‚úÖ CLOSED             ‚Üê üîí Telnet not running
```

Both tools agree - they just present the information differently!

---

## Hands-On with nmap

### Basic nmap Commands

#### **Quick Scan** (Check common ports only)
```bash
nmap -F localhost
```
**What it does**: Scans 100 most common ports  
**When to use**: Quick security check, daily monitoring

#### **Targeted Scan** (Specific ports)
```bash
nmap -p 22,80,443 127.0.0.1
```
**What it does**: Checks only the ports you specify  
**When to use**: Follow up on specific concerns

#### **Stealth Scan** (Professional method)
```bash
sudo nmap -sS localhost
```
**What it does**: SYN scan - faster and harder to detect  
**When to use**: Professional assessments (requires sudo)

#### **Service Detection** (Find software versions)
```bash
nmap -sV localhost
```
**What it does**: Identifies what software is running on open ports  
**When to use**: Understanding what you're actually exposed to

### Reading nmap Output

**Example output:**
```
PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 7.4 (protocol 2.0)
80/tcp   open  http    Apache httpd 2.4.6
445/tcp  open  netbios-ssn Samba smbd 3.X - 4.X
```

**What this tells you:**
- **Port 22**: SSH remote access available (version 7.4)
- **Port 80**: Web server running (Apache 2.4.6)  
- **Port 445**: File sharing enabled (Samba)

---

## Service Enumeration in Practice

### From Port Number to Security Risk

#### **Port 22 - SSH Remote Access**
**Service**: Secure Shell for remote login  
**Risk**: High if weak passwords, medium if properly configured  
**Questions**: Who needs remote access? Are SSH keys used?

#### **Port 80 - Web Server**  
**Service**: HTTP web server (Apache, nginx, etc.)  
**Risk**: Depends on what website/application is running  
**Questions**: Is this a production site? Development server? Admin interface?

#### **Port 445 - SMB File Sharing**
**Service**: Windows/Samba file sharing  
**Risk**: High if exposed to internet, medium on local network  
**Questions**: What files are shared? Who has access?

### Version Analysis Example

**nmap finds**: `OpenSSH 7.4`  
**Security check**: Is this current? (Latest is OpenSSH 9.x)  
**Risk assessment**: Older version likely has known vulnerabilities  
**Action needed**: Update SSH server or disable if not needed

---

## Simple Risk Classification

### Quick Risk Assessment Rules

**üî¥ High Risk**
- Remote access services (SSH, RDP, VNC)
- Web applications with known vulnerabilities
- Database servers exposed to network
- File sharing with weak authentication

**üü° Medium Risk**  
- Development web servers (5000, 8080, 8888)
- Local network file sharing
- Monitoring or management services
- Services with authentication enabled

**üü¢ Low Risk**
- Services only accessible locally (127.0.0.1)
- Well-configured and updated services
- Services behind proper firewalls
- Non-critical development tools

### Assessment Questions

**For each open service:**
1. **Do I need this running?** (Principle of least privilege)
2. **Who can access it?** (Local, network, or internet)
3. **Is it up to date?** (Known vulnerabilities in old versions)
4. **Is it properly configured?** (Default passwords, weak settings)

---

## Mini-Case Study Practice

### Scenario 1: Your Development Machine

**nmap results**: Ports 5000, 8080, 8888 open (web development)  
**Analysis**: Development servers running  
**Risk level**: Medium (if accessible from network)  
**Question**: Should these be running when you're not developing?

### Scenario 2: School Computer Lab

**Hypothetical nmap**: Ports 22, 445, 3389 open  
**Analysis**: Remote access and file sharing enabled  
**Risk level**: High (administrative access available)  
**Question**: Do students need access to these services?

### Your Turn

**Run nmap on your system and classify each result:**

| Port | Service | Risk Level | Reason |
|------|---------|------------|--------|
| _____ | _____ | üî¥üü°üü¢ | _____ |
| _____ | _____ | üî¥üü°üü¢ | _____ |
| _____ | _____ | üî¥üü°üü¢ | _____ |

---

## Ethics: The Golden Rule

**üö® Only scan devices you own or are authorised to test**

**‚úÖ OK to scan:**
- Your own computer (localhost/127.0.0.1)
- Your Raspberry Pi
- Lab environments with teacher permission

**‚ùå Never scan:**
- Other students' computers
- School servers without permission
- Internet hosts you don't own
- Any network you're not authorised to test

**Remember**: These tools can disrupt networks if misused. Use them responsibly!

---

## Connecting Week 2.1 to Week 2.2

### The Professional Workflow

**Step 1 - Discovery**: nmap finds all open services  
**Step 2 - Identification**: nmap identifies software versions  
**Step 3 - Assessment**: Your Python scripts analyse and prioritise risks

### Why Both Tools Matter

**nmap**: Professional discovery and enumeration  
**Python**: Custom analysis and intelligent reporting  
**Together**: Complete vulnerability assessment capability

**Coming in Week 2.2 Code Practice**: Build a Python tool that reads nmap output and creates professional security reports with risk scoring and remediation advice!

---

## Coming Up Next

### Week 2.2 Lab: nmap Fundamentals
- Master basic nmap scanning techniques
- Practice service enumeration and version detection
- Learn to interpret professional scan results
- Build systematic vulnerability assessment skills

### Week 2.2 Code Practice: Smart Vulnerability Analyzer ‚≠ê
**The "Wow" Factor**: Your Python tool will:
- Parse complex nmap XML output automatically
- Generate executive-friendly security reports
- Prioritise vulnerabilities by risk level
- Suggest specific remediation actions

**Result**: Transform raw technical data into actionable security intelligence!

---

## Key Terms to Remember

- **Port Scanning**: Testing ports to discover running services
- **Service Enumeration**: Identifying software and versions on open ports  
- **Banner Grabbing**: Collecting version information from network services
- **Risk Classification**: Categorising vulnerabilities by severity and priority
- **Attack Surface**: Total exposure created by running network services

## Next: Week 2.2 Lab