# Week 2.2 Lab: nmap Fundamentals

## Lab Overview
Master professional network vulnerability scanning using nmap. Learn to discover, enumerate, and assess network services systematically.

**Time Required:** Self-paced (approximately 40 minutes)  
**Environment:** Raspberry Pi 4 (in class) or GitHub Codespaces (at home)  
**Focus:** Professional vulnerability scanning techniques

---

## üö® Important Ethics and Safety Notice

**‚ö†Ô∏è CRITICAL: Only scan devices you own or are authorised to test.**

- **DO** scan your own system (127.0.0.1/localhost)
- **DO** scan with teacher permission in lab environments
- **DO NOT** scan other students' computers or school servers without permission

---

## Learning Objectives
By the end of this lab, you will be able to:
- Execute basic nmap scanning techniques safely
- Interpret nmap output to identify network services
- Compare nmap results with your Week 2.1 Python tools
- Classify discovered services by risk level
- Document vulnerability findings systematically

---

## Pre-Lab Setup

### Install nmap (if needed)
```bash
# Check if nmap is available
which nmap || sudo apt-get install -y nmap

# Test basic functionality
nmap --version
```

---

## Part 1: Basic Scan

### Step 1.1: Your First Professional Scan

```bash
# Basic scan of your own computer
nmap localhost
```

**Example output (your results will differ):**
```
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000053s latency).
Not shown: 995 closed tcp ports (conn-refused)
PORT     STATE SERVICE
22/tcp   open  ssh
5000/tcp open  upnp
8080/tcp open  http-proxy
```

**Record your actual results:**

| Port    | State   | Service        | Description |
| ------- | ------- | -------------- | ----------- |
| `_____` | `_____` | `____________` |             | 
| `_____` | `_____` | `____________` |             |
| `_____` | `_____` | `____________` |             |


### Step 1.2: Compare with Week 2.1 Python

**Run your threat_check.py:**
```bash
python3 threat_check.py
```

**Quick comparison:**
1. **Ports both tools found open**: `_________________`
2. **Ports nmap found that Python missed**: `_________________`

**‚ùì Why did nmap find more services?**

---

## Part 2: Targeted Scans

### Step 2.1: Fast vs Full Scanning

```bash
# Quick scan (100 most common ports)
time nmap -F localhost

# Compare with full scan timing
time nmap localhost
```

**Record timing:**
- **Quick scan (-F)**: _____ seconds
- **Full scan**: _____ seconds

### Step 2.2: Development Port Check

```bash
# Scan common web development ports
nmap -p 3000,5000,8000,8080,8888 localhost
```

**Record development services:**

| Port | Status          | Likely Purpose     | 
| ---- | --------------- | ------------------ |
| 3000 | ‚òê Open ‚òê Closed | React/Node.js      |
| 5000 | ‚òê Open ‚òê Closed | Flask/Python       |
| 8080 | ‚òê Open ‚òê Closed | Web proxy/dev      |
| 8888 | ‚òê Open ‚òê Closed | Jupyter/dev server |

**‚ùì Are any development services running that you forgot about?**

---

## Part 3: Service Enumeration

### Step 3.1: Identify Software Versions

```bash
# Service version detection
nmap -sV localhost
```

**Example enhanced output:**
```
PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 8.9p1 Ubuntu-3ubuntu0.1
5000/tcp open  http    Werkzeug/2.3.6 Python/3.10.6
8080/tcp open  http    Apache httpd 2.4.52
```

**Record your service details:**

| Port | Service | Version | Notes  |
| ---- | ------- | ------- | ------ |
|      |         |         | .      |
|      |         |         | .      |
|      |         |         | .      | 

### Step 3.2: Version Analysis

**For each service with version information:**

**‚ùì Security Questions:**
- Is this version current or outdated?
- Could this service be disabled when not needed?
- Does this service need to be accessible from the network?

---

## Part 4: Risk Assessment & Documentation

### Step 4.1: Risk Classification

**Classify each open service:**

**üî¥ High Risk**: Remote access, admin services, public web apps
**üü° Medium Risk**: Development tools, local web servers  
**üü¢ Low Risk**: Local-only services, updated and configured properly

**Your risk assessment:**

| Port | Service | Risk Level | Reasoning |
| ---- | ------- | ---------- | --------- |
|      |         | üî¥üü°üü¢     |           | 
|      |         | üî¥üü°üü¢     |           |
|      |         | üî¥üü°üü¢     |           |

### Step 4.2: Save Professional Results

```bash
# Save detailed scan results
nmap -sV -oN my_vulnerability_scan.txt localhost

# View the saved report
cat my_vulnerability_scan.txt
```

**Document your top 3 security concerns:**

1. **Priority 1**: `_________________________________`
2. **Priority 2**: `_________________________________`
3. **Priority 3**: `_________________________________`

---

## Mini-Case Study: Development vs Production Thinking

### Your Current Setup Analysis

**Based on your scan results:**

**If this were a production web server serving customers:**

**üî¥ Critical Problems** (Fix immediately):
- Services: `_________________________________`
- Why critical: `_________________________________`

**üü° Review Needed** (Should investigate):
- Services: `_________________________________`  
- Why concerning: `_________________________________`

**üü¢ Acceptable** (Normal for production):
- Services: `_________________________________`
- Why acceptable: `_________________________________`

**‚ùì Key Insight**: How does context (development vs production) change risk assessment?

---

## ‚≠ê Extension Activities (Optional/Advanced)

### Advanced Scanning Techniques

```bash
# ‚≠ê Stealth SYN scan (requires sudo)
sudo nmap -sS localhost

# ‚≠ê Operating system detection (requires sudo)  
sudo nmap -O localhost

# ‚≠ê Vulnerability scripts (may not work in all environments)
nmap --script vuln localhost
```

### Challenge: Comprehensive Assessment

```bash
# ‚≠ê Combine multiple techniques (advanced users)
sudo nmap -sS -sV -O -oN comprehensive_scan.txt localhost
```

**Advanced analysis:**
- How does SYN scan differ from basic scan?
- What operating system details were detected?
- Did vulnerability scripts find specific issues?

---

## ü§î Reflection Questions

### ‚ùì Technical Skills

1. **Discovery Power**: What did nmap reveal that you didn't expect?
   `_________________________________________________`

2. **Professional Advantage**: How does nmap improve on your Python scanning approach?
   `_________________________________________________`

### ‚ùì Security Understanding

3. **Risk Context**: Which services create the biggest attack surface?
   `_________________________________________________`

4. **Remediation Priority**: What would you fix first and why?
   `_________________________________________________`

### ‚ùì Real-World Application

5. **Monitoring Strategy**: How often should you scan your system for new services?
   `_________________________________________________`

6. **Next Investigation**: Based on findings, what would you research further?
   `_________________________________________________`

---

## Lab Submission

**Complete this scan summary:**

1. **Total open ports**: `_______`
2. **Most concerning service**: `_______`
3. **Scan technique that provided most insight**: `_______`
4. **Time for comprehensive assessment**: `_______` minutes

**Key Takeaway (one sentence):**
`_____________________________________________________`

---

## Next: Week 2.2 Code Practice - Smart Vulnerability Analyzer ‚≠ê

**Coming up**: Build a Python tool that reads nmap results and creates intelligent security reports with risk scoring and plain-English recommendations!